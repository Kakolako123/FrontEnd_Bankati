<div class="admin-container">
  <div class="sidebar">
    <div class="test">
      <ul>
        <li style="background-color: #3e8e41;">
          <a routerLink="/dashboard" style="color: white; text-decoration: none">
            <i class="fas fa-tachometer-alt" style="color: white"></i> Dashboard
          </a>
        </li>
        <li>
          <a routerLink="/cart" style="color: white; text-decoration: none">
            <i class="fas fa-credit-card" style="color: white"></i> Bank Card
          </a>
        </li>
        <li>
          <a routerLink="/facture" style="color: white; text-decoration: none">
            <i class="fas fa-file-invoice" style="color: white"></i> Factures
          </a>
        </li>
        <li>
          <a routerLink="/currency" style="color: white; text-decoration: none">
            <i class="fas fa-coins"></i> Converter
          </a>
        </li>
        <li><i class="fas fa-chart-bar" style="color: white"></i> Analytics</li>
        <li><i class="fas fa-bookmark" style="color: white"></i> Bookmarks</li>
        <li><i class="fas fa-cog" style="color: white"></i> Settings</li>
        <li><i class="fas fa-user" style="color: white"></i> Profile</li>
        <li><i class="fas fa-sign-out-alt" style="color: white"></i> Logout</li>
      </ul>
    </div>
  </div>

  <div class="main-content">
    <h1 class="title">User Management</h1>
    <button class="add-button" (click)="addUser()">+ Add New User</button>

    <table class="user-table">
      <thead>
      <tr>
        <th>#</th>
        <th>Photo</th>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Role</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let user of users; let i = index">
        <td>{{ i + 1 }}</td>
        <td>
          <img [src]="user.photo" alt="{{ user.name }}" class="user-photo" />
        </td>
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.phone }}</td>
        <td>{{ user.role }}</td>
        <td>
          <button class="edit-button" (click)="editUser(user)">Edit</button>
          <button class="delete-button" (click)="deleteUser(user)">Delete</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal for editing user -->
<div *ngIf="selectedUser" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Fill the Form</h2>
      <button class="close-btn" (click)="cancelEdit()">Ã—</button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="saveUser()" class="form-container">
        <div class="form-left">
          <img
            [src]="selectedUser.photo || 'https://via.placeholder.com/100'"
            alt="User Photo"
            class="user-photo"
          />
        </div>
        <div class="form-right">
          <label for="name">Name:</label>
          <input
            type="text"
            id="name"
            [(ngModel)]="selectedUser.name"
            name="name"
            required
          />

          <label for="age">Age:</label>
          <input
            type="number"
            id="age"
            [(ngModel)]="selectedUser.age"
            name="age"
            required
          />

          <label for="city">City:</label>
          <input
            type="text"
            id="city"
            [(ngModel)]="selectedUser.city"
            name="city"
            required
          />

          <label for="email">E-mail:</label>
          <input
            type="email"
            id="email"
            [(ngModel)]="selectedUser.email"
            name="email"
            required
          />

          <label for="phone">Phone:</label>
          <input
            type="text"
            id="phone"
            [(ngModel)]="selectedUser.phone"
            name="phone"
            required
          />

          <label for="post">Post:</label>
          <input
            type="text"
            id="post"
            [(ngModel)]="selectedUser.role"
            name="post"
            required
          />

          <label for="start-date">Start Date:</label>
          <input
            type="date"
            id="start-date"
            [(ngModel)]="selectedUser.startDate"
            name="startDate"
            required
          />
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="submit" class="submit-btn" (click)="saveUser()">Submit</button>
      <button type="button" class="cancel-btn" (click)="cancelEdit()">Cancel</button>
    </div>
  </div>
</div>
